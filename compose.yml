name: taco

include:
    - ./server/compose.yml
    - ./client/compose.yml

services:
    caddy:
        image: caddy:alpine
        env_file: ./.env
        volumes:
            - ./caddy/Caddyfile:/etc/caddy/Caddyfile
            - caddy_data:/data
            - caddy_config:/config
        networks:
            - caddy
        ports:
            - 80:80
            - 443:443
        depends_on:
            - server
            - client

volumes:
    caddy_data:
    caddy_config:


networks:
    caddy:
        driver: bridge
